# 1. 가상 메모리 (Virtual Memory)

## 1.1 가상 메모리란?

SSD나 HDD를 RAM처럼 사용하는 기술이다.

### 개념

- 정의: 물리 메모리보다 큰 주소 공간을 제공하는 메모리 관리 기법
- 목적: 실행하려는 프로그램에 램이 충분하지 않으면 윈도우는 RAM에 저장된 정보를 HDD 또는 SSD에 저장된 페이징 파일을 이용한다.

### 페이징 파일

가상 메모리를 사용한다는 것은 **페이징 파일**과 **정보**를 이동하여 **충분한 RAM을 확보**하여 높은 메모리를 요구하는 프로그램이 올바르게 실행되도록 하는 것

## 1.2 페이징 (Paging)

<img src="images\페이지와 프레임.png" width="500" height="300"/>

### 페이지와 프레임

- **페이지**: 프로세스의 주소 공간을 고정 크기로 나눈 단위
- **프레임**: 물리 메모리를 페이지와 같은 크기로 나눈 단위
- **페이지 크기**: 일반적으로 4KB

### 주소 변환

```
논리 주소 = [페이지 번호 | 오프셋]
물리 주소 = [프레임 번호 | 오프셋]
```

### 페이지 테이블

- 논리 주소의 페이지 번호를 물리 주소의 프레임 번호로 변환
- 각 프로세스마다 독립적인 페이지 테이블 보유

## 1.3 페이지 폴트 (Page Fault)

<img src="images\페이지 폴트.png" width="550" height="350"/>

**메모리에 올라와있지 않은 페이지를 접근**하려고 하면 페이지 테이블 항목이 **invalid**이므로 페이지 폴트 트랩 **page fault trap**을 발생시킨다

### 처리 과정

1. 페이지 테이블에서 **invalid 비트** 발견
2. 운영체제에 **트랩 발생**
3. 디스크에서 해당 페이지를 **메모리로 로드**
4. 페이지 **테이블 갱신**
5. 프로세스 **재실행**

## 1.4 스레싱 (Thrashing)

<img src="images\스레싱.png" width="510" height="280"/>

가상 메모리 사용으로 인하여 프로세스가 사용할 수 있는 **가상 메모리 Page가 부족**할 때 CPU는 사용자가 사용하는 **Program에 자원을 할당하지 못하고 성능이 저하**되는 현상

### 발생 원인

멀티 프로그램 정도가 높은 상황에서 많은 프로세스가 할당 받아야 하는 최소 페이지 프레임 수를 갖지 못한 상황

### 해결 방법

- **Working Set 모델**: 실행 상태의 프로세스가 일정 시간 동안 원활하게 실행될 수 있도록 (페이지 폴트 없이) 물리 메모리 공간에 올라와 있어야 하는 페이지 집합
- **Page Fault Frequency 모델**: 페이지 폴트 빈도를 모니터링하여 프레임 할당 조절

## 핵심 요약

### 가상 메모리

- **핵심**: 물리 메모리 한계를 디스크로 확장
- **페이징**: 고정 크기 단위로 메모리 관리
- **주의사항**: 스레싱 방지를 위한 적절한 프레임 할당 필요
