# 1. 프로세스와 스레드

## 1.1 프로그램 vs 프로세스

### 프로그램 (Program)

- 정의: 보조기억장치에 저장된 실행 가능한 명령 모음
- 상태: 정적인 상태 (아직 실행되지 않은 상태)
- 위치: 하드디스크, SSD 등 보조기억장치

### 프로세스 (Process)

- 정의: 메인 메모리에 올라와 실행되고 있는 프로그램
- 상태: 동적인 상태 (실행 중인 상태)
- 위치: 주기억장치(RAM)

## 1.2 정의

- **프로세스**: 운영체제로부터 자원을 할당받는 작업의 단위
- **스레드**: 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위

# 2. 프로세스 (Process)

## 2.1 프로세스의 특징

### 독립적인 메모리 공간

```
프로세스 A: [Code][Data][Heap][Stack]
프로세스 B: [Code][Data][Heap][Stack]
```

<img src="images\프로세스 메모리 구조.png" width="550" height="330"/>

```
Code: 실행할 프로그램 코드
Data: 전역 변수, static 변수
Heap: 동적 할당 메모리
Stack: 함수 호출, 지역 변수
```

### PCB (Process Control Block)

프로세스의 모든 정보를 담고 있는 구조체

- 프로세스 ID (PID)
- 프로세스 상태 (실행, 대기, 준비 등)
- CPU 레지스터 정보
- 메모리 관리 정보
- 스케줄링 정보

## 2.2 프로세스 간 통신 (IPC)

<img src="images\IPC.png" width="550" height="330"/>

프로세스는 독립된 메모리 공간을 가지므로 **IPC(Inter-Process Communication)** 가 필요

- **파이프 (Pipe)**: 단방향 통신
- **소켓 (Socket)**: 네트워크 통신
- **공유 메모리**: 메모리 영역 공유
- **메시지 큐**: 메시지 기반 통신

# 3. 스레드 (Thread)

## 3.1 스레드의 특징

<img src="images\스레드.png" width="550" height="330"/>

### 메모리 공유

```
프로세스 내부:
공유 영역: [Code][Data][Heap]
개별 영역: [Stack1][Stack2][Stack3]
```

- **공유**: Code, Data, Heap 영역
- **개별**: Stack 영역만 독립적으로 할당

### TCB (Thread Control Block)

스레드별 관리 정보:

- 스레드 ID
- 레지스터 정보
- 스택 포인터
- 스레드 상태

## 3.2 스레드의 장단점

### 장점

- **자원 절약**: 메모리 공유로 효율적 사용
- **빠른 통신**: 공유 메모리를 통한 직접 통신
- **빠른 생성**: 프로세스 생성보다 오버헤드 적음
- **컨텍스트 스위칭**: 프로세스보다 빠른 전환

### 단점

- **동기화 문제**: 공유 자원 접근 시 충돌 가능
- **안정성**: 한 스레드 오류 시 전체 프로세스 영향
- **복잡성**: 동기화 처리로 프로그래밍 복잡도 증가

# 4. 멀티프로세싱 vs 멀티스레딩

## 4.1 멀티프로세싱

<img src="images\멀티프로세싱.png" width="550" height="330"/>

### 특징

- **안정성**: 한 프로세스 오류가 다른 프로세스에 영향 없음
- **독립성**: 각 프로세스가 독립된 메모리 공간
- **보안**: 프로세스 간 메모리 접근 불가

### 단점

- **자원 소모**: 프로세스별 메모리 할당으로 비효율
- **통신 비용**: IPC로 인한 오버헤드
- **생성 비용**: 프로세스 생성 시 많은 자원 필요

## 4.2 멀티스레딩

<img src="images\멀티스레딩.png" width="550" height="330"/>

### 특징

- **효율성**: 메모리 공유로 자원 절약
- **성능**: 빠른 컨텍스트 스위칭
- **통신**: 공유 메모리를 통한 직접 통신

### 주의사항

- **동기화**: Race Condition 방지 필요
- **데드락**: 상호 대기 상태 방지
- **스레드 안전성**: Thread-safe 프로그래밍 필요

# 5. 컨텍스트 스위칭 (Context Switching)

## 5.1 프로세스 컨텍스트 스위칭

<img src="images\프로세스 컨텍스트 스위칭.png" width="550" height="330"/>

### 과정

1. 현재 프로세스 상태 저장 (PCB에 저장)
2. 캐시 플러시 (메모리 관리 단위 초기화)
3. 새 프로세스 상태 복원 (PCB에서 로드)
4. 캐시 재구성 (새 프로세스 데이터로 채움)

### 오버헤드

- 높은 비용: 메모리 주소 공간 전환
- 캐시 미스: 캐시 무효화로 인한 성능 저하

## 5.2 스레드 컨텍스트 스위칭

### 과정

1. 현재 스레드 상태 저장 (TCB에 저장)
2. 새 스레드 상태 복원 (TCB에서 로드)
3. 스택 포인터 변경

### 장점

- 낮은 비용: 메모리 주소 공간 유지
- 캐시 유지: 공유 메모리로 인한 캐시 효율성

# 핵심 요약

## 프로세스

- 정의: 실행 중인 프로그램, 자원 할당의 단위
- 특징: 독립된 메모리 공간, 안정성, IPC 필요
- 용도: 안정성이 중요한 시스템, 독립적 작업

## 스레드

- 정의: 프로세스 내 실행 흐름, 실행의 단위
- 특징: 메모리 공유, 빠른 통신, 동기화 필요
- 용도: 성능이 중요한 애플리케이션, 협력적 작업

## 선택 기준

- 안정성 우선: 멀티프로세싱
- 성능 우선: 멀티스레딩
- 현실적 선택: 하이브리드 (프로세스 + 스레드)
